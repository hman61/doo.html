(function(a){'use strict';var b={instance:{},counter:{},getNextID:a=>(void 0===b.counter[a]&&(b.counter[a]=-1),a+"_"+ ++b.counter[a])};class c extends HTMLElement{static get $Version(){return"0.9.6"}constructor(a=100){super(),c.debug=location.href.includes("#debug")||!1,this.debug=c.debug,this.renderOnLoad=!0,this.initialTime=new Date().getTime(),this.PAGE_SIZE=a,!this.template&&this.getAttribute("template")&&(this.template=this.template||this.getAttribute("template")),this.scrollTimer=null,this.filteredData={},this.visibleColumns=[],this.place=[],this.scrollPos=0,this.id||(this.id=b.getNextID(this.constructor.name)),b.instance[this.id]||(b.instance[this.id]=this)}static get $Config(){return{TEMPLATE_EXT:".html",COMPONENT_DIR:"/components",NAME:"Doo.ui",TYPE:{DEFAULT:0,ENUM:1,DEEP:2,COMPUTED:3},MATCH:{ANY:-1,STARTS_WITH:0,EXACT:1},DELIMITER:{BEG:"{{",END:"}}"},DOCUMENT:"document",SHADOW:"shadow",FLEX_BODY:".fbody"}}static get $Computed(){return{doo123:a=>a.instance.insertDoo123(a.name,a.props),currentItem:a=>a.item.address,$0:a=>a.item[a.props[0]],$1:a=>a.item[a.props[1]],$2:a=>a.item[a.props[2]],greyShade:a=>["light-grey","grey","dark-grey","black"][a.i%4],fraction:a=>["","whole","half","third","quarter","fifth"][a.arr.length],toUpperCase:a=>a.getValue().toUpperCase(),toLowerCase:a=>a.getValue().toLowerCase(),substring:a=>a.getValue().substring(a.$1,a.$2),length:a=>a.arr.length,count:a=>a.arr.length,recCountByDataSetKey:a=>a.klass[a.dataSetKey].length,i:a=>a.i,row:a=>a.i+1,$id:a=>"_$"+a.i,n:a=>a.i+1,ts:()=>new Date().getTime(),pluralize:a=>1<a.arr.length?"s":"",nbsp:()=>"&nbsp;",zeroOne:a=>a.i%2,lorem:a=>{let b="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.";if(!isNaN(a.$1)){let c=Math.min(a.$1,6);for(let a=1;a<c;a++)b+=" Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}return b},highlight:a=>{if(a.item){let b=a.filterKey&&a.filterKey.toLowerCase();if(!b)return a.item[a.fld];let c=new RegExp(b,"ig"),d=a.item[a.fld].toString().replace(/&amp\;/gi,"&");return d.replace(c,a=>"<b>"+a+"</b>")}}}}static get observedAttributes(){return["set-data-src","key","doo-foreach","orientation","doo-dao","data-src","implements","doo-db-update","doo-db","doo-theme","data-set","index","page-size","debug"]}static xAttr(){return["src","selected","checked","disabled","readonly"]}static dynamic(a,b,d){return c.$Config.DELIMITER.BEG+a[d]+c.$Config.DELIMITER.END}async attributeChangedCallback(a,b,d){if(0<d.length&&b!==d)if("doo-db-update"===a)await this.render();else if("set-data-src"===a){let a=this.getAttribute("data-set"),b=this.getAttribute("set-data-src");c.DB.setData(a,b)}else"page-size"===a?this.PAGE_SIZE=d:"debug"===a&&(c.debug=!0)}static async insertComponent(a,b,d="."){a=a.trim();let e=a.toLowerCase(),f=document.createElement("div");f.innerHTML=`<doo-${a} template="${d}/templates/${e}${c.$Config.TEMPLATE_EXT}?${c.$Computed.ts()}"></doo-${a}>`,document.querySelector(`${b}`).innerHTML=f.innerHTML}async connectedCallback(a=!1){if(this.debug){let a=this.constructor.name.toLowerCase();console.log(`Custom tag added: <doo-${a} />`)}let b,d=document.querySelectorAll("doo-dao");for(let e=0,f=d.length;e<f;e++){b=d[e].querySelectorAll("DATA");for(let a=0,d=b.length;a<d;a++){let d=await this.getDataObj(b[a].getAttribute("data-src")),e=b[a].getAttribute("name");c.DB.setData(e,d,this.constructor.name)}d[e].innerHTML=""}if(b=this.querySelectorAll("DATA"),0<b.length)for(let a=0,d=b.length;a<d;a++){let d=await this.getDataObj(b[a].getAttribute("data-src")),e=b[a].getAttribute("name");this.data[e]=d,0==a&&(this.defaultDataSet=e,c.DB.setData(this.defaultDataSet,this.data[e],this.constructor.name))}(a||this.renderOnLoad)&&(await this.render()),this.scrollTarget&&(this.scrollElem=this.shadow.firstElementChild.querySelector(this.scrollTarget))}static define(a){customElements.define("doo-"+a.name.toLowerCase(),a)}getFilteredData(a){return this.filteredData[a]}async setTemplate(a,b){let c=0===a.indexOf("<template")?a:"";return c=this.firstElementChild&&0<this.firstElementChild.getElementsByTagName("template").length?this.firstElementChild.getElementsByTagName("template")[0].outerHTML:await this.getTemplateURI(a,b),c}async getTemplateURI(a){let b;return b=0===a.indexOf("#")?await document.querySelector(a).outerHTML:await c.fetchURL(a),b}dooParse(a){let b=a.cloneNode(!0);b.removeAttribute("data-set"),b.removeAttribute("dynamic");let d=b.outerHTML.replace(/\t/g,"").replace(/\n/g,""),e=d;c.xAttr().forEach(a=>{d=d.replace(new RegExp(" "+a+"=\"{{(.+)}}\"","g")," doo-"+a+"=\"{{$1}}\"")});let f=e===d;window[this.constructor.name]===void 0&&(window[this.constructor.name]=[]);let g=window[this.constructor.name].length;d=d.split("=\"self.").join("=\""+this.constructor.name+"["+g+"].");let h,j=d.split(c.$Config.DELIMITER.END),k=[],l=j.length;for(let b=0;b<l;b++)h=j[b].split(c.$Config.DELIMITER.BEG),k.push(h[0]),k.push(this.getPropertyType(h[1]));return{templateArray:k,xHtml:f}}getPropertyType(a){if(void 0===a)return new c.FieldType("",void 0,this.constructor,this);a=a.trim();let b=c.$Config.TYPE.DEFAULT;-1<a.indexOf("(")?b=c.$Config.TYPE.COMPUTED:0<a.indexOf(".")?b=c.$Config.TYPE.DEEP:!isNaN(a)&&(b=c.$Config.TYPE.ENUM);let d=new c.FieldType(a,b,this.constructor,this);return this.visibleColumns.push(a),d.parentElem=this.parentElement,d}setItemValue(a,b,c){let d=b.split(".");for(var e=0;e<d.length-1;e++)a=a[d[e]]={};a[d[d.length-1]]=c}getItemValue(a,b){if("function"==typeof b)return this[b](a);let c=a;try{b.split(".").forEach(a=>c=c[a])}catch(a){console.log("Property not found",b,c)}return c}renderNode(a,b,d,e=0,f=this.PAGE_SIZE){d=Array.isArray(d)?d:[d];let g=d.length,h=e+f;h>g&&(h=g);let k=[];for(let g=e;g<h;g++)for(let b=0,e=a.length;b<e;b+=2){k.push(a[b]);let e=a[b+1];switch(e.type){case c.$Config.TYPE.DEFAULT:case c.$Config.TYPE.DEEP:k.push(this.getItemValue(d[g],e.fld));break;case c.$Config.TYPE.ENUM:k.push(d[g]);break;case c.$Config.TYPE.COMPUTED:let a=new c.DataItem(d[g],g,d);a.fld=e.fld,a.func=e.func,a.$1=e.$1,a.$2=e.$2,a.$3=e.$3,a.instance=e.instance,k.push(e.func(a));break;case void 0:k.push("");}}if(b)return k.join("");else{let a=k.join("");return c.xAttr().forEach(b=>{("checked"===b||"disabled"===b)&&(a=a.replace(new RegExp(" doo-"+b+"=\"false\"","g")," ").replace(new RegExp(" doo-"+b+"=\"0\"","g")," ")),a=a.replace(new RegExp(" doo-"+b+"=","g")," "+b+"=").replace(new RegExp(" "+b+"=\"\"","g")," ")}),a}}getLevel(a){let b=0,c=a.getAttribute("dynamic");for(;a.parentElement;)a=a.parentElement,b++;return b}clearDataFilter(a){this.filteredData[a]=void 0}setDataFilter(a,b){let c=this.filterKey&&this.filterKey.toLowerCase(),d=this.data[a].slice(),e=this;b?d=d.filter(b):c&&(c=c+"",d=d.filter(a=>e.visibleColumns.some(b=>-1<(e.getItemValue(a,b)+"").toLowerCase().indexOf(c)))),this.filteredData[a]=d.slice(0,this.page_size)}async getDataObj(a,b){a=a.trim();let d,e;if(0===a.indexOf("http")||0<a.indexOf(".json"))return d=await c.fetchURL(a),JSON.parse(d);if(0<a.indexOf(".js"))return d=await import(`${a}`),d.default;if(0===a.indexOf("parent.index")){let a,c=b.parentElement.getAttribute("data-set"),d=b.parentElement.getAttribute("data-src");return"this.data"===d&&(a=this.data[c]["{{ i() }}"].row),b.setAttribute("data-src",a),a}if(0<a.indexOf("..")){let b=a.replace("[","").replace("]",""),c=b.split(".."),d=[],e=isNaN(c[0]),f=parseInt(e?c[0].charCodeAt(0):c[0]),g=parseInt(e?c[1].charCodeAt(0):c[1]);for(let a=f;a<=g;a++)d.push(e?String.fromCharCode(a):a);return d.splice(0)}if(0===a.indexOf("[")){let b=a.replace("[","").replace("]","").split(",");return b.forEach(a=>a.trim()),b}return-1<a.indexOf("window.")?(e=a.split(".")[1].trim(),window[e]):-1<a.indexOf("const.")?(e=a.split(".")[1].trim(),e):0===a.indexOf("this.")?(e=a.split(".")[1],this[e]):(console.log("WARNING"+a+" datasource not scooped properly"),a)}async initDataNodes(a){let b,d,e=a.content.querySelectorAll("[data-set]"),f=e.length,g=0,h=[];for(g=0;g<f;g++){let a=e[g].getAttribute("data-set"),b=e[g].getAttribute("data-src");b&&(d="Doo.DB"===b?c.DB.getData(a):await this.getDataObj(b,e[g]),this.data[a]=Array.isArray(d)?d:d[a]),e[g].removeAttribute("data-src"),e[g].level=this.getLevel(e[g]),h.push(e[g])}const j=(c,a)=>c.level===a.level?0:c.level>a.level?1:-1;for(h.sort(j).reverse(),g=0;g<f;g++){let a=h[g].getAttribute("dynamic");b=-1<"|STYLE|LINK|".indexOf(`|${h[g].tagName}|`)?h[g]:"xdummy"===e[g].getAttribute("data-set")||h[g].parentElement&&-1<"|UL|TBODY|THEAD|TFOOT|TR|SELECT|".indexOf(`|${h[g].parentElement.tagName}|`)?h[g].parentElement:document.createElement("data"),b.dataKey=h[g].getAttribute("data-set");let c=this.dooParse(h[g]);b.templateArray=c.templateArray,b.xHtml=c.xHtml,b.name=g,b.level=this.getLevel(h[g]),a&&(b.isDynamic=!0),b.innerHTML=this.renderNode(b.templateArray,b.xHtml,this.data[b.dataKey],0,this.PAGE_SIZE,b),("DATA"===b.tagName||"STYLE"===b.tagName||"LINK"===b.tagName)&&(h[g].parentElement?h[g].parentElement.replaceChild(b,h[g]):(console.log("Warning: Templates should only have one childnode"),h[g].appendChild(b))),this.place.push(b)}return this.place}async prepareTemplate(a=null){this.debug&&console.log("Template:",this.template);let b=await this.setTemplate(this.template),c=document.createElement("div");c.innerHTML=b,c.querySelector("template")&&(c.innerHTML=c.querySelector("template")?b:`<template><center><pre>The template you are trying to import does not have a &lt;template&gt tag</pre><div style="color:red">${argTpl}</div></enter></template>`);let d=c.querySelector("template").cloneNode(!0);d.removeAttribute("id"),this.templateNode=document.createElement("template");let e=this.getAttribute("data-dispatch")||"undefined";if(this.templateNode.innerHTML=d.innerHTML.replace(/\${dataDispatch\}/g,e),!this.shadow&&this.getAttribute("css")){let a=this.getAttribute("css").split(","),b=a.length;for(let c,d=0;d<b;d++)c=document.createElement("link"),c.href=a[d],c.rel="stylesheet",this.templateNode.content.firstElementChild.parentNode.insertBefore(c,this.templateNode.content.firstElementChild)}this.templateElem=this.templateNode.content;let f=this.templateElem.querySelectorAll("style");f&&0<f.length&&this.templateElem.appendChild(f[0]),0===this.place.length&&(await this.initDataNodes(this.templateNode),this.getAttribute("style")&&this.templateNode.setAttribute("style",this.getAttribute("style")))}async setContext(){window[this.constructor.name]||(window[this.constructor.name]=[]),window[this.constructor.name].push(this),0<this.childNodes.length&&this.getElementsByTagName("template")&&0<this.getElementsByTagName("template").length&&this.removeChild(this.getElementsByTagName("template").item(0));let a=this.getAttribute("context")||c.$Config.SHADOW;a===c.$Config.SHADOW?(this.shadow=this.attachShadow({mode:"open"}),this.shadow.host.style.visibility="hidden",this.shadow.appendChild(this.templateElem),this.componentContainer=this.shadow.host):a===c.$Config.DOCUMENT&&(this.shadow=document,this.parentElement.style.visibility="hidden",this.parentElement.replaceChild(this.templateElem,this),this.componentContainer=this.parentElement),this.observer=new MutationObserver(a=>{this.scrollTarget&&"attributes"===a[0].type&&this.setScrollHeight(),this.observer.disconnect()});let b=navigator.userAgent.toUpperCase().includes("FIREFOX")?50:1;setTimeout(()=>{this.observer.observe(this.componentContainer,{attributes:!0}),this.componentContainer.style.visibility="visible"},b),this.setAttribute("doo-id",this.id)}async setScrollHeight(){this.scrollTarget&&(this.scrollElem=this.shadow.firstElementChild.querySelector(this.scrollTarget),this.data[this.defaultDataSet].length>this.PAGE_SIZE&&this.addScrollWatcher())}async render(a=null,b=0,c=null){if(!this.template)return void console.log(this.name+" has no template defined");this.templateNode||this.shadow||(await this.prepareTemplate(a));let d=this.debug?new Date().getTime():null;for(let d=0,e=this.place.length;d<e;d++){if(a&&a!==this.place[d].dataKey)continue;if(0===b&&"STYLE"!==this.place[d].tagName){let a="dummy"===this.place[d].getAttribute("data-set")?-1:0;this.place[d].setAttribute("page",a)}if(this.place[d].isDynamic)continue;let e=this.getFilteredData(this.place[d].dataKey)?this.getFilteredData(this.place[d].dataKey):this.data[this.place[d].dataKey];if(null!==c)this.place[d].append(this.renderNode(this.place[d].templateArray,this.place[d].templateArray.xHtml,e,c,1));else if(0<b){let a=this.scrollElem.querySelector("data[page=\""+b+"\"]");if(!a){let a=document.createElement("data");a.setAttribute("page",b),a.innerHTML=this.renderNode(this.place[d].templateArray,this.place[d].templateArray.xHtml,e,b*this.PAGE_SIZE,this.PAGE_SIZE),!this.lastInsertedElem||b>this.lastPage?this.place[d].parentElement.appendChild(a):this.lastInsertedElem.insertAdjacentElement("beforebegin",a),this.lastInsertedElem=a}else 0===a.innerHTML.length&&(a.innerHTML=this.renderNode(this.place[d].templateArray,this.place[d].templateArray.xHtml,e,b*this.PAGE_SIZE,this.PAGE_SIZE)),this.lastInsertedElem=a;this.lastInsertedElem.style.top=b*this.blockHeight+"px",this.lastInsertedElem.style.position="absolute"}else this.place[d].innerHTML=this.renderNode(this.place[d].templateArray,this.place[d].templateArray.xHtml,e,b*this.PAGE_SIZE,this.PAGE_SIZE)}if(this.shadow||this.setContext(),this.debug&&!this.getAttribute("title")&&this.setAttribute("title",this.id+":init() "+(new Date().getTime()-this.initialTime)+"ms"),this.debug){let a=new Date().getTime()-d+"ms";this.setAttribute("doo-render-time",a),this.setAttribute("title",this.getAttribute("title")+"|"+a)}return this.lastPage=b,b}static async fetchURL(a){return new Promise((b,c)=>{const d=new XMLHttpRequest;d.open("GET",a),d.onload=()=>b(d.responseText),d.onerror=()=>c(d.statusText),d.send()})}setHttpRequest(a,b){let c=this,d=new XMLHttpRequest;d.onload=function(){b(this.responseText,c)},d.open("GET",a,!0),d.send()}hasScroll(a){return"auto"===this.getStyle(a,"overflow-y")||"scroll"===this.getStyle(a,"overflow-y")}getStyle(a,b,c=null){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle(a,c).getPropertyValue(b)}async sortBy(a,b){let d=a.getAttribute("sort-dir");c.util.sortBy(this.data[this.defaultDataSet],b,d),a.nextElementSibling.classList.remove("dir_1","dir_-1"),a.nextElementSibling.classList.add(1==-1*parseInt(d)?"dir_-1":"dir_1"),a.setAttribute("sort-dir",-1*d);let e=this.scrollElem.querySelectorAll("[page]");if(e[0].innerHTML="",this.lastInsertedElem=null,this.rendering=!0,await this.render(this.defaultDataSet,0),this.rendering=!1,0<e.length)for(let a=e.length-1;0<a;a--)e[a].remove()}clearChildren(a){let b=this.scrollElem.querySelectorAll("[page]");for(let c=b.length-1;0<c;c--)a&&a.find(a=>a===parseInt(b[c].getAttribute("page")))||b[c].remove()}async setScrollContainerHeight(){this.scrollElem.style.height=this.rowHeight*(this.data[this.defaultDataSet].length-1)+"px"}async windowWatcher(){document.body.setAttribute("doo-height",window.offsetHeight)}async addScrollWatcher(){if(this.scrollTarget&&(this.scrollElem=this.shadow.firstElementChild.querySelector(this.scrollTarget),this.scrollElem&&this.data[this.defaultDataSet].length>this.PAGE_SIZE)){this.scrollElem.position="relative",this.container=this.scrollElem.parentElement,this.rowHeight=this.scrollElem.offsetHeight/this.PAGE_SIZE,this.setScrollContainerHeight(),this.blockHeight=this.PAGE_SIZE*this.rowHeight;let a=!1;for(;this.blockHeight<this.container.offsetHeight;)this.PAGE_SIZE*=2,this.blockHeight=this.PAGE_SIZE*this.rowHeight,a=!0;a&&(await this.render(this.defaultDataSet,this.lastPage||0)),this.lastScrollPos=0,this.container.addEventListener("scroll",this.scrollWatcher.bind(this))}}async scrollWatcher(){if(!this.rendering){this.rendering=!0;let a=parseInt(this.container.scrollTop/this.blockHeight),b=parseInt((a*this.blockHeight+this.blockHeight)/this.blockHeight),c=this.container.scrollTop>this.lastScrollPos?1:0,d=this.scrollElem.querySelector("data[page=\""+a+"\"]"),e=this.scrollElem.querySelector("data[page=\""+b+"\"]");!d||b>a?(!e&&this.render(this.defaultDataSet,b),this.currentPage=this.render(this.defaultDataSet,a)):a!=this.currentPage&&(this.currentPage=this.render(this.defaultDataSet,a));let f=1===c?[a-1,a,b]:[a,a+1];this.clearChildren(f),this.lastScrollPos=this.container.scrollTop,this.rendering=!1}}}c.DB={dataSet:{},setData:function(a,b,d){if(this.dataSet[a]=b,c.debug){if(!localStorage.getItem("Doo")){localStorage.setItem("Doo",JSON.stringify({}))}const b=JSON.parse(localStorage.getItem("Doo"));b[d+"_"+a]=this.dataSet[a],localStorage.setItem("Doo",JSON.stringify(b))}},getData:function(a){return this.dataSet[a]||(this.dataSet[a]=[]),this.dataSet[a]},prepend:function(a,b){this.append(a,b,!0)},append:async function(a,b,d=null){this.dataSet[a]=0===this.getData(a).length?b:Array.isArray(b)?d?b.concat(c.DB.getData(a)):c.DB.getData(a).concat(b):d?c.DB.getData(a).splice(0,0,b):c.DB.getData(a).push(b),this.refresh(a)},update:function(a,b,c){this.data(a).splice(c,1,b)},refresh:function(a,b=document){const c=b.querySelectorAll("[data-dispatch='"+a+"']"),d=c.length;for(let e=0;e<d;e++)c.item(e).render()},csvToJson:function(a){let b=a.split("\n"),c=[];if(void 0!==b){let a=b.length,d=b[0].replace(/\r/g,""),e=d.split(","),f=e.length;if(1<b.length){let d=/(,)(?=(?:[^"]|"[^"]*")*$)/g;for(let g=1;g<a-1;g++){let a={},h=b[g].replace(d,"|^|")+"|^|",k=h.split("|^|");for(let b=0;b<f;b++)a[e[b]]=k[b]?k[b].replace(/"/g,"").trim():"";c.push(a)}}}return c}},c.util={sortBy:(a,b,d)=>{if(1>a.length)return;const e={getValue:(a,b)=>{for(var c=b.split("."),d=a,e=0;e<c.length;e++)d=d[c[e]];return d},getDataType:function(a,b){if("object"==typeof a)return"byFunc";var c=e.getValue(b[0],a);if(c&&0<c.toString().indexOf("/")&&new Date(c)&&!isNaN(new Date(c).getTime()))return"byDate";for(var d=0;d<b.length;d++)if(isNaN(e.getValue(b[d],a)))return"byString";return"byNumber"},byFunc:function(c,a,b,f){var g=b[f].cmd,h=g.call(this,-1===b[f].dir?a:c,b[f].param,d),j=g.call(this,-1===b[f].dir?c:a,b[f].param,d);return h<j?-1:h>j?1:"undefined"==typeof b[f+1]?c.$_id-a.$_id:e[b[f+1].type](c,a,b,f+1)},byDate:function(d,a,b,f){var g=b[f].fld.replace(c.$Config.DELIMITER.BEG,"").replace(c.$Config.DELIMITER.END,""),h=e.getValue(-1===b[f].dir?a:d,g),j=e.getValue(-1===b[f].dir?d:a,g);return h.getTime||j.getTime||(h=new Date(h),j=new Date(j)),h=h.getTime(),j=j.getTime(),h<j?-1:h>j?1:"undefined"==typeof b[f+1]?d.$_id-a.$_id:e[b[f+1].type](d,a,b,f+1)},byString:function(d,a,b,f){var g=b[f].fld.replace(c.$Config.DELIMITER.BEG,"").replace(c.$Config.DELIMITER.END,""),h=e.getValue(-1===b[f].dir?a:d,g).toUpperCase(),j=e.getValue(-1===b[f].dir?d:a,g).toUpperCase();return h<j?-1:h>j?1:"undefined"==typeof b[f+1]?d.$_id-a.$_id:e[b[f+1].type](d,a,b,f+1)},byNumber:function(d,a,b,f){var g=b[f].fld.replace(c.$Config.DELIMITER.BEG,"").replace(c.$Config.DELIMITER.END,""),h=+e.getValue(-1===b[f].dir?a:d,g),j=+e.getValue(-1===b[f].dir?d:a,g);return h<j?-1:h>j?1:"undefined"==typeof b[f+1]?d.$_id-a.$_id:e[b[f+1].type](d,a,b,f+1)}};var f=[];if("string"==typeof b&&(b=b.replace("{{","").replace("}}",""),b=[b,d||1]),b)for(var g=0;g<b.length;g+=2)f.push({fld:b[g],dir:+(b[g+1]||1),type:e.getDataType(b[g],a)});if(0<a.length&&void 0===typeof a[0].$_id){Timer.start("makeids");for(let b=0,c=a.length;b<c;b++)a[b].$_id=+b;Timer.stop("makeids",!0)}a.sort(function(c,a){return e[f[0].type](c,a,f,0)})},curTop:(a,b)=>{let c=0;if(a.offsetParent)for(;a&&(c+=a.offsetTop,!(b&&"absolute"===this.getStyle(a,"position")));)a=a.offsetParent;else a.y&&(c+=a.y);return c}},c.FieldType=class{constructor(a,b,d,e){this._fld=a,this.type=b,this.klass=d,this.instance=e,this._func=void 0,this._parentElem=void 0,this.$1=void 0,this.$2=void 0,this.$3=void 0,this.type===c.$Config.TYPE.COMPUTED&&this.createComputed()}set fld(a){this._fld=a}set parentElem(a){this._parentElem=a}set func(a){this._func=a}get fld(){return this._fld}get func(){return this._func}createComputed(){let a=this.fld.split("("),b=a[0].split(".").reverse(),d=b[0];0<Reflect.ownKeys(this.klass).filter(a=>a===d).length?(this.func=this.klass[d],c.$Computed[d]&&console.log("WARNING:","Overwriting a Doo base Doo.$Computed method is not recommended")):c.$Computed[d]&&(this.func=c.$Computed[d]),this.fld=1<b.length?b[1]:void 0,"function"!=typeof this.func&&(console.log("static "+func+"() is not a defined on the Doo base class nor as a static member function"),type=void 0);let e=a[1].replace(")","");if(e&&0<e.length){e=e.split(",");for(let a=0,b=e.length;a<b;a++)this["$"+(a+1)]=e[a]}}},c.DataItem=class{constructor(a,b,c){this.item=a,this.i=b,this.arr=c,this._dataSetKey="",this._fld="",this._args=[],this._searchable=!0}set dataSetKey(a){this._dataSetKey=a}set fld(a){this._fld=a}set args(a){this._args=a}set filterKey(a){this._filterKey=a}set searchAble(a){this._searchAble=new Boolean(a)}get fld(){return this._fld}get length(){return this.arr.length}get filterKey(){return this._filterKey}isSearchable(){return this.searchable}getValue(){return this.item[this.fld]}toString(){return JSON.stringify(this.item)}highlight(){if(this.fld){let a=this.filterKey&&this.filterKey.toLowerCase();if(!a)return item[field];let b=new RegExp(a,"ig"),c=this.getValue().toString().replace(/&amp\;/gi,"&");return c.replace(b,a=>"<b>"+a+"</b>")}}},c.EMPTY_ROW=function(){return new c.DataItem(item[0],i,[""])},a.Doo=c})(window);